(()=>{(()=>{var $e="https://kaiiiz.github.io/hugo-theme-monochrome/zh-tw/index.json",Ze=new Intl.Collator("en",{numeric:!0,sensitivity:"base"}).compare,Re=1/0,we=e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),Me="eexxaacctt",Pe=/\p{P}/gu,He="A-Z",Ue="a-z",ge=(e,s,p)=>e.replace(He,s).replace(Ue,p),Be={unicode:!1,alpha:null,interSplit:"[^A-Za-z\\d']+",intraSplit:"[a-z][A-Z]",interBound:"[^A-Za-z\\d]",intraBound:"[A-Za-z]\\d|\\d[A-Za-z]|[a-z][A-Z]",interLft:0,interRgt:0,interChars:".",interIns:Re,intraChars:"[a-z\\d']",intraIns:null,intraContr:"'[a-z]{1,2}\\b",intraMode:0,intraSlice:[1,Re],intraSub:null,intraTrn:null,intraDel:null,intraFilt:(e,s,p)=>!0,sort:(e,s,p)=>{let{idx:l,chars:r,terms:f,interLft2:C,interLft1:z,start:ne,intraIns:ae,interIns:G}=e;return l.map((B,b)=>b).sort((B,b)=>r[b]-r[B]||ae[B]-ae[b]||f[b]+C[b]+.5*z[b]-(f[B]+C[B]+.5*z[B])||G[B]-G[b]||ne[B]-ne[b]||Ze(s[l[B]],s[l[b]]))}},ve=(e,s)=>s==0?"":s==1?e+"??":s==Re?e+"*?":e+`{0,${s}}?`,De="(?:\\b|_)";function Le(e){e=Object.assign({},Be,e);let{unicode:s,interLft:p,interRgt:l,intraMode:r,intraSlice:f,intraIns:C,intraSub:z,intraTrn:ne,intraDel:ae,intraContr:G,intraSplit:B,interSplit:b,intraBound:ue,interBound:me,intraChars:le}=e;C??=r,z??=r,ne??=r,ae??=r;let Ce=e.letters??e.alpha;if(Ce!=null){let t=Ce.toLocaleUpperCase(),a=Ce.toLocaleLowerCase();b=ge(b,t,a),B=ge(B,t,a),me=ge(me,t,a),ue=ge(ue,t,a),le=ge(le,t,a),G=ge(G,t,a)}let x=s?"u":"",w='".+?"',c=new RegExp(w,"gi"+x),D=new RegExp(`(?:\\s+|^)-(?:${le}+|${w})`,"gi"+x),{intraRules:k}=e;k==null&&(k=t=>{let a=Be.intraSlice,d=0,o=0,g=0,u=0;if(/[^\d]/.test(t)){let m=t.length;m<=4?m>=3&&(g=Math.min(ne,1),m==4&&(d=Math.min(C,1))):(a=f,d=C,o=z,g=ne,u=ae)}return{intraSlice:a,intraIns:d,intraSub:o,intraTrn:g,intraDel:u}});let O=!!B,F=new RegExp(B,"g"+x),j=new RegExp(b,"g"+x),U=new RegExp("^"+b+"|"+b+"$","g"+x),J=new RegExp(G,"gi"+x),V=t=>{let a=[];t=t.replace(c,o=>(a.push(o),Me)),t=t.replace(U,"").toLocaleLowerCase(),O&&(t=t.replace(F,o=>o[0]+" "+o[1]));let d=0;return t.split(j).filter(o=>o!="").map(o=>o===Me?a[d++]:o)},re=/[^\d]+|\d+/g,Q=(t,a=0,d=!1)=>{let o=V(t);if(o.length==0)return[];let g=Array(o.length).fill("");o=o.map((E,h)=>E.replace(J,$=>(g[h]=$,"")));let u;if(r==1)u=o.map((E,h)=>{if(E[0]==='"')return we(E.slice(1,-1));let $="";for(let I of E.matchAll(re)){let i=I[0],{intraSlice:n,intraIns:v,intraSub:L,intraTrn:R,intraDel:A}=k(i);if(v+L+R+A==0)$+=i+g[h];else{let[N,pe]=n,W=i.slice(0,N),oe=i.slice(pe),y=i.slice(N,pe);v==1&&W.length==1&&W!=y[0]&&(W+="(?!"+W+")");let fe=y.length,ie=[i];if(L)for(let _=0;_<fe;_++)ie.push(W+y.slice(0,_)+le+y.slice(_+1)+oe);if(R)for(let _=0;_<fe-1;_++)y[_]!=y[_+1]&&ie.push(W+y.slice(0,_)+y[_+1]+y[_]+y.slice(_+2)+oe);if(A)for(let _=0;_<fe;_++)ie.push(W+y.slice(0,_+1)+"?"+y.slice(_+1)+oe);if(v){let _=ve(le,1);for(let X=0;X<fe;X++)ie.push(W+y.slice(0,X)+_+y.slice(X)+oe)}$+="(?:"+ie.join("|")+")"+g[h]}}return $});else{let E=ve(le,C);a==2&&C>0&&(E=")("+E+")("),u=o.map((h,$)=>h[0]==='"'?we(h.slice(1,-1)):h.split("").map((I,i,n)=>(C==1&&i==0&&n.length>1&&I!=n[i+1]&&(I+="(?!"+I+")"),I)).join(E)+g[$])}let m=p==2?De:"",q=l==2?De:"",Y=q+ve(e.interChars,e.interIns)+m;return a>0?d?u=m+"("+u.join(")"+q+"|"+m+"(")+")"+q:(u="("+u.join(")("+Y+")(")+")",u="(.??"+m+")"+u+"("+q+".*)"):(u=u.join(Y),u=m+u+q),[new RegExp(u,"i"+x),o,g]},_e=(t,a,d)=>{let[o]=Q(a);if(o==null)return null;let g=[];if(d!=null)for(let u=0;u<d.length;u++){let m=d[u];o.test(t[m])&&g.push(m)}else for(let u=0;u<t.length;u++)o.test(t[u])&&g.push(u);return g},ze=!!ue,Ae=new RegExp(me,x),Te=new RegExp(ue,x),je=(t,a,d)=>{let[o,g,u]=Q(d,1),[m]=Q(d,2),q=g.length,Y=t.length,E=Array(Y).fill(0),h={idx:Array(Y),start:E.slice(),chars:E.slice(),terms:E.slice(),interIns:E.slice(),intraIns:E.slice(),interLft2:E.slice(),interRgt2:E.slice(),interLft1:E.slice(),interRgt1:E.slice(),ranges:Array(Y)},$=p==1||l==1,I=0;for(let i=0;i<t.length;i++){let n=a[t[i]],v=n.match(o),L=v.index+v[1].length,R=L,A=!1,N=0,pe=0,W=0,oe=0,y=0,fe=0,ie=0,_=0,X=[];for(let T=0,M=2;T<q;T++,M+=2){let se=v[M].toLocaleLowerCase(),K=g[T],ee=K[0]=='"'?K.slice(1,-1):K+u[T],P=ee.length,H=se.length,Z=se==ee;if(!Z&&v[M+1].length>=P){let S=v[M+1].toLocaleLowerCase().indexOf(ee);S>-1&&(X.push(R,H,S,P),R+=Se(v,M,S,P),se=ee,H=P,Z=!0,T==0&&(L=R))}if($||Z){let S=R-1,te=R+H,ce=!1,Ee=!1;if(S==-1||Ae.test(n[S]))Z&&N++,ce=!0;else{if(p==2){A=!0;break}if(ze&&Te.test(n[S]+n[S+1]))Z&&pe++,ce=!0;else if(p==1){let Ie=v[M+1],xe=R+H;if(Ie.length>=P){let he=0,de=!1,Je=new RegExp(ee,"ig"+x),ke;for(;ke=Je.exec(Ie);){he=ke.index;let Fe=xe+he,be=Fe-1;if(be==-1||Ae.test(n[be])){N++,de=!0;break}else if(Te.test(n[be]+n[Fe])){pe++,de=!0;break}}de&&(ce=!0,X.push(R,H,he,P),R+=Se(v,M,he,P),se=ee,H=P,Z=!0,T==0&&(L=R))}if(!ce){A=!0;break}}}if(te==n.length||Ae.test(n[te]))Z&&W++,Ee=!0;else{if(l==2){A=!0;break}if(ze&&Te.test(n[te-1]+n[te]))Z&&oe++,Ee=!0;else if(l==1){A=!0;break}}Z&&(y+=P,ce&&Ee&&fe++)}if(H>P&&(_+=H-P),T>0&&(ie+=v[M-1].length),!e.intraFilt(ee,se,R)){A=!0;break}T<q-1&&(R+=H+v[M+1].length)}if(!A){h.idx[I]=t[i],h.interLft2[I]=N,h.interLft1[I]=pe,h.interRgt2[I]=W,h.interRgt1[I]=oe,h.chars[I]=y,h.terms[I]=fe,h.interIns[I]=ie,h.intraIns[I]=_,h.start[I]=L;let T=n.match(m),M=T.index+T[1].length,se=X.length,K=se>0?0:1/0,ee=se-4;for(let S=2;S<T.length;){let te=T[S].length;if(K<=ee&&X[K]==M){let ce=X[K+1],Ee=X[K+2],Ie=X[K+3],xe=S,he="";for(let de=0;de<ce;xe++)he+=T[xe],de+=T[xe].length;T.splice(S,xe-S,he),M+=Se(T,S,Ee,Ie),K+=4}else M+=te,S++}M=T.index+T[1].length;let P=h.ranges[I]=[],H=M,Z=M;for(let S=2;S<T.length;S++){let te=T[S].length;M+=te,S%2==0?Z=M:te>0&&(P.push(H,Z),H=Z=M)}Z>H&&P.push(H,Z),I++}}if(I<t.length)for(let i in h)h[i]=h[i].slice(0,I);return h},Se=(t,a,d,o)=>{let g=t[a]+t[a+1].slice(0,d);return t[a-1]+=g,t[a]=t[a+1].slice(d,d+o),t[a+1]=t[a+1].slice(d+o),g.length},Qe=5,We=(t,a,d,o=1e3,g)=>{d=d?d===!0?Qe:d:0;let u=null,m=null,q=[];a=a.replace(D,i=>{let n=i.trim().slice(1);return n=n[0]==='"'?we(n.slice(1,-1)):n.replace(Pe,""),n!=""&&q.push(n),""});let Y=V(a),E;if(q.length>0){if(E=new RegExp(q.join("|"),"i"+x),Y.length==0){let i=[];for(let n=0;n<t.length;n++)E.test(t[n])||i.push(n);return[i,null,null]}}else if(Y.length==0)return[null,null,null];if(d>0){let i=V(a);if(i.length>1){let n=i.slice().sort((L,R)=>R.length-L.length);for(let L=0;L<n.length;L++){if(g?.length==0)return[[],null,null];g=_e(t,n[L],g)}if(i.length>d)return[g,null,null];u=ye(i).map(L=>L.join(" ")),m=[];let v=new Set;for(let L=0;L<u.length;L++)if(v.size<g.length){let R=g.filter(N=>!v.has(N)),A=_e(t,u[L],R);for(let N=0;N<A.length;N++)v.add(A[N]);m.push(A)}else m.push([])}}u==null&&(u=[a],m=[g?.length>0?g:_e(t,a)]);let h=null,$=null;if(q.length>0&&(m=m.map(i=>i.filter(n=>!E.test(t[n])))),m.reduce((i,n)=>i+n.length,0)<=o){h={},$=[];for(let i=0;i<m.length;i++){let n=m[i];if(n==null||n.length==0)continue;let v=u[i],L=je(n,t,v),R=e.sort(L,t,v);if(i>0)for(let A=0;A<R.length;A++)R[A]+=$.length;for(let A in L)h[A]=(h[A]??[]).concat(L[A]);$=$.concat(R)}}return[[].concat(...m),h,$]};return{search:(...t)=>We(...t),split:V,filter:_e,info:je,sort:e.sort}}var qe=(()=>{let e={A:"\xC1\xC0\xC3\xC2\xC4\u0104",a:"\xE1\xE0\xE3\xE2\xE4\u0105",E:"\xC9\xC8\xCA\xCB\u0116",e:"\xE9\xE8\xEA\xEB\u0119",I:"\xCD\xCC\xCE\xCF\u012E",i:"\xED\xEC\xEE\xEF\u012F",O:"\xD3\xD2\xD4\xD5\xD6",o:"\xF3\xF2\xF4\xF5\xF6",U:"\xDA\xD9\xDB\xDC\u016A\u0172",u:"\xFA\xF9\xFB\xFC\u016B\u0173",C:"\xC7\u010C\u0106",c:"\xE7\u010D\u0107",L:"\u0141",l:"\u0142",N:"\xD1\u0143",n:"\xF1\u0144",S:"\u0160\u015A",s:"\u0161\u015B",Z:"\u017B\u0179",z:"\u017C\u017A"},s=new Map,p="";for(let f in e)e[f].split("").forEach(C=>{p+=C,s.set(C,f)});let l=new RegExp(`[${p}]`,"g"),r=f=>s.get(f);return f=>{if(typeof f=="string")return f.replace(l,r);let C=Array(f.length);for(let z=0;z<f.length;z++)C[z]=f[z].replace(l,r);return C}})();function ye(e){e=e.slice();let s=e.length,p=[e.slice()],l=new Array(s).fill(0),r=1,f,C;for(;r<s;)l[r]<r?(f=r%2&&l[r],C=e[r],e[r]=e[f],e[f]=C,++l[r],r=1,p.push(e.slice())):(l[r]=0,++r);return p}var Oe=(e,s)=>s?`<mark>${e}</mark>`:e,Ne=(e,s)=>e+s;function Xe(e,s,p=Oe,l="",r=Ne){l=r(l,p(e.substring(0,s[0]),!1))??l;for(let f=0;f<s.length;f+=2){let C=s[f],z=s[f+1];l=r(l,p(e.substring(C,z),!0))??l,f<s.length-3&&(l=r(l,p(e.substring(s[f+1],s[f+2]),!1))??l)}return l=r(l,p(e.substring(s[s.length-1]),!1))??l,l}Le.latinize=qe,Le.permute=e=>ye([...Array(e.length).keys()]).sort((p,l)=>{for(let r=0;r<p.length;r++)if(p[r]!=l[r])return p[r]-l[r];return 0}).map(p=>p.map(l=>e[l])),Le.highlight=Xe;async function Ge(){let s=fetch($e),p=document.getElementById("search_btn"),l=document.getElementById("search_menu_wrapper"),r=document.getElementById("search_menu_close_btn"),f=document.getElementById("search_menu_input"),C=document.getElementById("search_menu_results");p.addEventListener("click",function(){l.classList.remove("hidden"),f.focus()}),r.addEventListener("click",function(){l.classList.add("hidden")});let z=await(await s).json(),ne={unicode:!0,interSplit:"[^\\p{L}\\d']+",intraSplit:"\\p{Ll}\\p{Lu}",intraBound:"\\p{L}\\d|\\d\\p{L}|\\p{Ll}\\p{Lu}",intraChars:"[\\p{L}\\d']",intraContr:"'\\p{L}{1,2}\\b"},ae=new Le(ne),G=[];z.forEach(x=>{G.push(x.title,x.content)});let B=(x,w,c)=>`<a href="${w}">
                    <div class="search-menu-result-item">
                        <div class="search-menu-result-item-title">${x}</div>
                        <div class="search-menu-result-item-content">${c}</div>
                    </div>
                </a>`,b=()=>{C.innerHTML=z.reduce((x,w)=>{let c=w.content.length>100?w.content.substring(0,100)+"...":w.content;return x+B(w.title,w.permalink,c)},"")},ue=x=>"<mark>"+x+"</mark>",me=(x,w)=>{let c="",D=G[x],k=0;for(let O=0;O<w.length;O+=2){let F=w[O],j=w[O+1];c=c+D.substring(k,F)+ue(D.substring(F,j)),k=j}return c=c+D.substring(k,D.length),c},le=(x,w)=>{let c="",D=G[x],k=20,O=100,F=-1,j=-1;for(let U=0;U<w.length;U+=2){let J=Math.max(w[U]-k,0),V=Math.min(w[U+1]+O,D.length),re=w[U],Q=w[U+1];J<=F?c=c+D.substring(j,re):(J!==0&&(c=c+"..."),c=c+D.substring(J,re)),c=c+ue(D.substring(re,Q)),F=V,j=Q}return c=c+D.substring(j,F),F<D.length&&(c=c+"..."),c},Ce=x=>{let[w,c,D]=ae.search(G,x),k=[],O=new Map;if(D!==null)for(let F=0;F<D.length;F++){let j=D[F],U=c.idx[j],J=Math.floor(U/2),V=U%2;if(!O.has(J)){O.set(J,k.length);let Q={...z[J]};Q.content.length>100&&(Q.content=Q.content.substring(0,100)+"..."),k.push(Q)}let re=k[O.get(J)];V===0?re.title=me(U,c.ranges[j]):V===1&&(re.content=le(U,c.ranges[j]))}k.length==0?C.innerHTML="":C.innerHTML=k.reduce((F,j)=>F+B(j.title,j.permalink,j.content),"")};f.addEventListener("input",function(){this.value===""?b():Ce(this.value.trim())}),b()}window.addEventListener("DOMContentLoaded",Ge)})();})();
